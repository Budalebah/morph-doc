<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-How Morphism Works/archi">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Morphism Modular Design | Morphism docs – The Optimistic zkEVM Scaling Solution docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.morphism.xyz/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.morphism.xyz/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://docs.morphism.xyz/docs/How Morphism Works/archi"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Morphism Modular Design | Morphism docs – The Optimistic zkEVM Scaling Solution docs"><meta data-rh="true" name="description" content="TL;DR"><meta data-rh="true" property="og:description" content="TL;DR"><link data-rh="true" rel="icon" href="https://www.morphism.xyz/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.morphism.xyz/docs/How Morphism Works/archi"><link data-rh="true" rel="alternate" href="https://docs.morphism.xyz/docs/How Morphism Works/archi" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.morphism.xyz/docs/How Morphism Works/archi" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Morphism docs – The Optimistic zkEVM Scaling Solution docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Morphism docs – The Optimistic zkEVM Scaling Solution docs Atom Feed"><link rel="stylesheet" href="/assets/css/styles.f88885c2.css">
<link rel="preload" href="/assets/js/runtime~main.8c5c3a13.js" as="script">
<link rel="preload" href="/assets/js/main.2d054cde.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/index/logo_dark.svg" alt="Morphism Doc Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/index/logo_light.svg" alt="Morphism Doc Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/quick-start/startintro">Quick Start</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/How Morphism Works/howintro">How Morhsim works</a><a class="navbar__item navbar__link" href="/docs/Build on Morphism/devintro">Build on Morphism</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/How Morphism Works/howintro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/How Morphism Works/archi">Morphism Modular Design</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/How Morphism Works/Decentralized Sequencers/">Decentralized Sequencers</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/How Morphism Works/General Protocol Design/L1-L2-Msg">General Protocol Design</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/How Morphism Works/Responsive Validity Proof/1Overview">Responsive Validity Proof</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Morphism Modular Design</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Morphism Modular Design</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tldr">TL;DR<a href="#tldr" class="hash-link" aria-label="Direct link to TL;DR" title="Direct link to TL;DR">​</a></h2><ol><li>Due to its improved composability, the modular design of blockchain has become a trend, and we have incorporated this design into the construction of Morphism.</li><li>The architectural design of Morphism can be divided into three parts: high-level consensus, execution, and state verification, which correspond to different functions.</li><li>Each part contains different components that can be combined in various ways to perform functions in different roles. Different roles also correspond to multiple components to maintain independence..</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2><p>A general Layer 2 workflow is as follows:</p><ol><li>Users send transactions to sequencers.</li><li>Sequencers receive the transactions, generate blocks, and execute them.</li><li>Transactions are put into batches and submitted to Layer 1 contracts for data availability.</li></ol><p>In addition to the basic workflow, Morphism aims to achieve a balance between decentralization, security, and scalability by implementing various measures, including:</p><ul><li>Sequencers needing to reach consensus with each other before executing transactions.</li><li>Validators (any user that runs an L2 node) can start a challenge that requires sequencers to provide the zk proof.</li><li>Sequencers can call the zkProver to generate a validity proof.</li></ul><p>To achieve these features, we designed several modules:</p><ul><li>L1 Contracts</li></ul><ol><li>Consensus Staking Contract</li><li>Rollup Contracts</li><li>ZK Proof Contract</li><li>Challenge Contract</li><li>Bridge Contract</li></ol><ul><li>Sequencer<ul><li>Txns/State Submitter</li><li>Consensus Module</li><li>L2 Node</li></ul></li><li>Full Node</li><li>Validator</li><li>Prover
The skeletal architecture of Morphism is shown below:
<img loading="lazy" alt="arichitecture" src="/assets/images/archi-282b054ede6f15d19526d71e00bf9408.png" width="1358" height="1368" class="img_ev3q"></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="l2-node">L2 Node<a href="#l2-node" class="hash-link" aria-label="Direct link to L2 Node" title="Direct link to L2 Node">​</a></h3><p>L2 node plays a pivotal role in overall architecture design, serving as a hub for multiple other modules to interact and exchange information through. Various roles require L2 node as an integral part of their normal operation.</p><p>L2 node itself is also divided into different components, each with its own specific function:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="transactions-manager-mempool">Transactions Manager (Mempool)<a href="#transactions-manager-mempool" class="hash-link" aria-label="Direct link to Transactions Manager (Mempool)" title="Direct link to Transactions Manager (Mempool)">​</a></h3><p>The L2 node will use this component to manage all Layer 2 transactions, including:</p><ol><li>Accepting user-initiated transactions and storing them in the Mempool</li><li>Responding to the consensus layer by providing the latest transactions from the Mempool for block generation when certain conditions are met</li><li>Recording and storing Layer 2 transactions.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="executor">Executor<a href="#executor" class="hash-link" aria-label="Direct link to Executor" title="Direct link to Executor">​</a></h3><p>The L2 node will maintain the real-time status of Layer 2, and currently Morphism has made some modifications to Geth specifically for ZK-Proof, using it as the execution layer. After receiving consensus-approved blocks, the L2 node applies them to the current state to achieve state transition.
Based on this logic, the execution layer ensures Ethereum compatibility and allows developers to have a consistent development experience.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="synchronizer">Synchronizer<a href="#synchronizer" class="hash-link" aria-label="Direct link to Synchronizer" title="Direct link to Synchronizer">​</a></h3><p>There is often a need for synchronization between L2 nodes to restore network status, so the L2 node includes a synchronizer to synchronize data with each other. The frequency and functionality of synchronization vary depending on the role used. For example, for an L2 node running a sequencer, it will first synchronize blocks among various sequencers to achieve consensus, and then synchronize blocks to full nodes. As for full nodes, other roles in the network such as validator and prover will synchronize blocks from the full node to complete their work.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sequencers">Sequencers<a href="#sequencers" class="hash-link" aria-label="Direct link to Sequencers" title="Direct link to Sequencers">​</a></h3><p>As the most important part of the network, sequencers serve the following functions:</p><ol><li>Receiving Layer 2 users&#x27; transactions and form the block (L2 Node)</li><li>Reach block consensus with other sequencers (Consensus)</li><li>Excute blocks and apply state transmission (L2 Node)</li><li>Batch the blocks and submit them to Layer 1 along with the new Layer 2 state ()</li><li>Sync the blocks with full nodes</li><li>Utilize provers to generate validity proof when being challenged</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="validator">Validator<a href="#validator" class="hash-link" aria-label="Direct link to Validator" title="Direct link to Validator">​</a></h3><p>Validator is a role that can be taken on by any user, and becoming a validator is completely permissionless. Validators need to determine whether the state submitted by the Sequencer to L1 is correct, and the best way to do this is to maintain an L2 Node that synchronizes transactions and state changes in L2.
When a validator identifies an incorrect state, they can trigger a challenge by calling the contract&#x27;s method, which will require the sequencer to generate and submit a zk proof for the challenged block.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prover">Prover<a href="#prover" class="hash-link" aria-label="Direct link to Prover" title="Direct link to Prover">​</a></h3><p>Prover is an indispensable part of the Morphism architecture. When a sequencer is challenged by a validator, in order to prove its innocence, the sequencer needs to call the prover to generate zk proofs for the corresponding state change. </p><p>The Prover module needs to maintain two components: L2 Node and zkEVM. It will synchronize the required Layer 2 transaction information through L2 Node and generate corresponding zk proofs through zkEVM component.</p><p>Under the current framework of Morphism, the prover is only called when the sequencer is challenged due to inefficient performance and high cost in generating zk proofs with current technology conditions. After relevant issues are properly resolved in the future, Morphism will be converted into a complete ZK Rollup that generates zk proof for each Layer 2 block.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/morphism-labs/morphism-doc/blob/main/docs/How Morphism Works/2-archi.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/How Morphism Works/howintro"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Introduction</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/How Morphism Works/Decentralized Sequencers/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Decentralized Sequencers</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#tldr" class="table-of-contents__link toc-highlight">TL;DR</a></li><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a><ul><li><a href="#l2-node" class="table-of-contents__link toc-highlight">L2 Node</a></li><li><a href="#transactions-manager-mempool" class="table-of-contents__link toc-highlight">Transactions Manager (Mempool)</a></li><li><a href="#executor" class="table-of-contents__link toc-highlight">Executor</a></li><li><a href="#synchronizer" class="table-of-contents__link toc-highlight">Synchronizer</a></li><li><a href="#sequencers" class="table-of-contents__link toc-highlight">Sequencers</a></li><li><a href="#validator" class="table-of-contents__link toc-highlight">Validator</a></li><li><a href="#prover" class="table-of-contents__link toc-highlight">Prover</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Morphism</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.morphism.xyz/" target="_blank" rel="noopener noreferrer" class="footer__link-item">About</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/Morphism_EN" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://medium.com/@Morphism_EN" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Morphism. All rights reserved.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.8c5c3a13.js"></script>
<script src="/assets/js/main.2d054cde.js"></script>
</body>
</html>