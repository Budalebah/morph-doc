"use strict";(self.webpackChunkmorph_doc=self.webpackChunkmorph_doc||[]).push([[3056],{9613:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>m});var o=r(9496);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var c=o.createContext({}),l=function(e){var t=o.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},p=function(e){var t=l(e.components);return o.createElement(c.Provider,{value:t},e.children)},h="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var r=e.components,n=e.mdxType,a=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),h=l(r),d=n,m=h["".concat(c,".").concat(d)]||h[d]||u[d]||a;return r?o.createElement(m,i(i({ref:t},p),{},{components:r})):o.createElement(m,i({ref:t},p))}));function m(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=r.length,i=new Array(a);i[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[h]="string"==typeof e?e:n,i[1]=s;for(var l=2;l<a;l++)i[l]=r[l];return o.createElement.apply(null,i)}return o.createElement.apply(null,r)}d.displayName="MDXCreateElement"},8656:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var o=r(8063),n=(r(9496),r(9613));const a={title:"Transaction Fees on Morph",lang:"en-US",keywords:["morph","ethereum","rollup","layer2","validity proof","optimstic zk-rollup"],description:"Upgrade your blockchain experience with Morph - the secure decentralized, cost0efficient, and high-performing optimstic zk-rollup solution. Try it now!"},i=void 0,s={unversionedId:"how-morph-works/general-protocol-design/transaction-fees-on-morph",id:"how-morph-works/general-protocol-design/transaction-fees-on-morph",title:"Transaction Fees on Morph",description:"Upgrade your blockchain experience with Morph - the secure decentralized, cost0efficient, and high-performing optimstic zk-rollup solution. Try it now!",source:"@site/docs/how-morph-works/general-protocol-design/3-transaction-fees-on-morph.md",sourceDirName:"how-morph-works/general-protocol-design",slug:"/how-morph-works/general-protocol-design/transaction-fees-on-morph",permalink:"/docs/how-morph-works/general-protocol-design/transaction-fees-on-morph",draft:!1,editUrl:"https://github.com/morph-l2/morph-doc/tree/main/docs/how-morph-works/general-protocol-design/3-transaction-fees-on-morph.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Transaction Fees on Morph",lang:"en-US",keywords:["morph","ethereum","rollup","layer2","validity proof","optimstic zk-rollup"],description:"Upgrade your blockchain experience with Morph - the secure decentralized, cost0efficient, and high-performing optimstic zk-rollup solution. Try it now!"},sidebar:"HowSidebar",previous:{title:"Communication between Morph and Ethereum",permalink:"/docs/how-morph-works/general-protocol-design/communicate-between-morph-and-ethereum"},next:{title:"Transactions Life Cycle",permalink:"/docs/how-morph-works/general-protocol-design/transactions-life-cycle"}},c={},l=[{value:"The L2 execution fee",id:"the-l2-execution-fee",level:2},{value:"The L1 data fee",id:"the-l1-data-fee",level:2}],p={toc:l},h="wrapper";function u(e){let{components:t,...r}=e;return(0,n.kt)(h,(0,o.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"On Morph, transaction fees share similarities with those on Ethereum, but the Layer 2 environment introduces distinct aspects that preclude a direct one-to-one comparison. Fortunately, Morph\u2019s commitment to EVM compatibility simplifies these distinctions, facilitating a seamless and manageable experience within your applications."),(0,n.kt)("p",null,"Outlined below is the formula used to calculate gas costs associated with transactions on Morph."),(0,n.kt)("p",null,"There are two cost components for a transaction on Morph: the L2 execution fee and the L1 data/security fee."),(0,n.kt)("h2",{id:"the-l2-execution-fee"},"The L2 execution fee"),(0,n.kt)("p",null,"Transactions on Morph, much like those on Ethereum, incur ",(0,n.kt)("strong",{parentName:"p"},"gas")," fees proportional to the computation and storage they consume."),(0,n.kt)("p",null,"Every L2 transaction incurs some ",(0,n.kt)("strong",{parentName:"p"},"execution fee"),", which is the product of the gas used by the transaction and the gas price specified for that transaction."),(0,n.kt)("p",null,"This mirrors fees on  Ethereum, with the added advantage that gas prices on Morph are significantly lower."),(0,n.kt)("p",null,"The calculation is straightforward:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"l2_execution_fee = transaction_gas_price * l2_gas_used\n\ntransaction_gas_price = l2_base_fee + l2_priority_fee\n\n")),(0,n.kt)("p",null,"The amount of L2 gas consumed depends on the particular transaction in question. Due to EVM compatibility, transactions typically use approximately the same amount of gas on Morph as they do on Ethereum."),(0,n.kt)("h2",{id:"the-l1-data-fee"},"The L1 data fee"),(0,n.kt)("p",null,"Morph diverges from Ethereum in that it also commits all transactions to Ethereum\u2019s blockchain. This step is crucial to Morph\u2019s security model, ensuring the data necessary to synchronize a Morph node is always publicly available on Ethereum, thereby classifying Morph as a true Layer 2 solution."),(0,n.kt)("p",null,"Users on Morph cover the costs associated with transmitting their transactions to Ethereum. This is referred to as the L1 data fee, and it's the primary cost discrepancy between Morph (or other L2s) and Ethereum."),(0,n.kt)("p",null,"Due to Ethereum\u2019s higher gas costs, the ",(0,n.kt)("strong",{parentName:"p"},"L1 data fee")," typically constitutes the majority of a transaction\u2019s total cost on Morph."),(0,n.kt)("p",null,"This fee is based on four factors:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"The current gas price on Ethereum - l1_base_fee"),(0,n.kt)("li",{parentName:"ol"},"The gas cost to publish the transaction to Ethereum. This scales roughly with the size of the transaction (in bytes) - tx_data_gas"),(0,n.kt)("li",{parentName:"ol"},"A fixed overhead cost denominated in gas. This is currently set to 2100."),(0,n.kt)("li",{parentName:"ol"},"A dynamic overhead cost which scales the L1 fee paid by a fixed number. This is currently set to 1.0. (which shows in GasPriceOracle.sol as scaler/1e9 )")),(0,n.kt)("p",null,"The mathematical representation is as follows:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"l1_data_fee = l1_base_fee * (tx_data_gas + fixed_overhead) * dynamic_overhead\n")),(0,n.kt)("p",null,"Where ",(0,n.kt)("inlineCode",{parentName:"p"},"tx_data_gas")," is:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"tx_data_gas = count_zero_bytes(tx_data) * 4 + count_non_zero_bytes(tx_data) * 16\n")))}u.isMDXComponent=!0}}]);